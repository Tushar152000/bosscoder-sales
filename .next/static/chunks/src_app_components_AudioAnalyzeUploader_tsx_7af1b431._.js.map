{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/tusharchauhan/bosscoder/audioListen/mp3-analyzer/src/app/components/AudioAnalyzeUploader.tsx"],"sourcesContent":["\"use client\";\nimport React, { useCallback, useMemo, useRef, useState } from \"react\";\n\ntype SectionName =\n  | \"greeting\"\n  | \"opening\"\n  | \"discovery\"\n  | \"pitch\"\n  | \"pricing\"\n  | \"closing\";\ntype Section = {\n  name: SectionName;\n  t0: number;\n  t1: number;\n  confidence?: number;\n  triggers?: string[];\n};\ntype KPIs = {\n  totalSec: number;\n  percentTime: Record<SectionName, number>;\n  timeToPricingSec: number | null;\n};\ntype Score = { total: number; detail: Record<string, number> };\n\ntype Rules = {\n  minDurationSec?: number;\n  requireKeywords?: string[];\n  forbiddenKeywords?: string[];\n  minWords?: number;\n};\ntype AnalyzeStats = { durationSec?: number; wordCount?: number };\n\ntype AnalyzeResponse =\n  | {\n      ok: true;\n      transcript: string;\n      passes: boolean;\n      failures: string[];\n      stats: AnalyzeStats;\n      sections?: Section[];\n      kpis?: KPIs;\n      score?: Score;\n      fileName?: string;\n    }\n  | { ok: false; error: string };\n\n/* =========================\n   Config & helpers\n   ========================= */\nconst DEFAULT_RULES: Rules = {\n  minDurationSec: 15,\n  requireKeywords: [],\n  forbiddenKeywords: [],\n  minWords: 20\n};\nconst MAX_SIZE_BYTES = 50 * 1024 * 1024; // 50MB\n\nconst formatSecs = (n?: number) => (typeof n === \"number\" ? n.toFixed(1) : \"—\");\nconst formatMMSS = (sec?: number | null) => {\n  if (sec == null || isNaN(sec)) return \"—\";\n  const s = Math.max(0, Math.floor(sec));\n  const m = Math.floor(s / 60);\n  const r = s % 60;\n  return `${m}:${r.toString().padStart(2, \"0\")}`;\n};\nconst formatBytes = (b: number) =>\n  b < 1024\n    ? `${b} B`\n    : b < 1024 * 1024\n    ? `${(b / 1024).toFixed(1)} KB`\n    : `${(b / (1024 * 1024)).toFixed(1)} MB`;\n\nconst SECTION_COLORS: Record<SectionName, string> = {\n  greeting: \"#E5E7EB\",\n  opening: \"#C7D2FE\",\n  discovery: \"#BBF7D0\",\n  pitch: \"#FDE68A\",\n  pricing: \"#FCA5A5\",\n  closing: \"#A7F3D0\"\n};\n\nfunction StatusBadge({ text, good }: { text: string; good?: boolean }) {\n  return (\n    <span\n      className={`inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-xs font-medium ${\n        good\n          ? \"bg-emerald-50 text-emerald-700 ring-1 ring-emerald-100\"\n          : \"bg-rose-50 text-rose-700 ring-1 ring-rose-100\"\n      }`}\n    >\n      <span\n        className={`h-1.5 w-1.5 rounded-full ${\n          good ? \"bg-emerald-500\" : \"bg-rose-500\"\n        }`}\n      />\n      {text}\n    </span>\n  );\n}\n\nfunction SectionTimeline({ secs }: { secs: Section[] }) {\n  const withDur = useMemo(\n    () => secs.map((s) => ({ ...s, dur: s.t1 - s.t0 })),\n    [secs]\n  );\n  const total = useMemo(\n    () => withDur.reduce((a, b) => a + b.dur, 0) || 1,\n    [withDur]\n  );\n\n  return (\n    <div className=\"mt-5\">\n      <div className=\"mb-2 flex items-center justify-between\">\n        <div className=\"text-sm font-medium text-slate-900\">Call Timeline</div>\n        <div className=\"flex flex-wrap gap-2 text-[11px] text-slate-600\">\n          {(Object.keys(SECTION_COLORS) as SectionName[]).map((n) => (\n            <span\n              key={n}\n              className=\"inline-flex items-center gap-1 rounded px-2 py-0.5 ring-1 ring-slate-200 bg-white\"\n            >\n              <span\n                className=\"inline-block h-2 w-2 rounded-full\"\n                style={{ background: SECTION_COLORS[n] }}\n              />\n              {n}\n            </span>\n          ))}\n        </div>\n      </div>\n      <div className=\"h-3 w-full overflow-hidden rounded bg-slate-100 ring-1 ring-inset ring-slate-200\">\n        <div className=\"flex h-full\">\n          {withDur.map((s, i) => (\n            <div\n              key={i}\n              title={`${s.name} (${s.dur.toFixed(1)}s)`}\n              style={{\n                width: `${(s.dur / total) * 100}%`,\n                background: SECTION_COLORS[s.name]\n              }}\n              className=\"h-full\"\n            />\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction KPIBlock({\n  label,\n  value,\n  sub\n}: {\n  label: string;\n  value: React.ReactNode;\n  sub?: React.ReactNode;\n}) {\n  return (\n    <div className=\"rounded-md border border-slate-200 bg-slate-50 px-3 py-2\">\n      <p className=\"text-xs text-slate-500\">{label}</p>\n      <p className=\"text-lg font-semibold text-slate-900\">{value}</p>\n      {sub && <p className=\"mt-0.5 text-[11px] text-slate-500\">{sub}</p>}\n    </div>\n  );\n}\n\nfunction ProgressBar({\n  value,\n  indeterminate\n}: {\n  value: number;\n  indeterminate?: boolean;\n}) {\n  return (\n    <div className=\"mt-3 h-2 w-full overflow-hidden rounded bg-slate-100\">\n      <div\n        className={`h-full transition-all ${\n          indeterminate ? \"animate-pulse bg-indigo-300\" : \"bg-indigo-500\"\n        }`}\n        style={{\n          width: indeterminate ? \"40%\" : `${Math.max(0, Math.min(100, value))}%`\n        }}\n      />\n    </div>\n  );\n}\nexport default function AudioAnalyzeUploader() {\n  const [file, setFile] = useState<File | null>(null);\n  const [hint, setHint] = useState<string>(\"\");\n  const [error, setError] = useState<string>(\"\");\n  const [loading, setLoading] = useState(false);\n  const [result, setResult] = useState<AnalyzeResponse | null>(null);\n  const inputRef = useRef<HTMLInputElement | null>(null);\n  const [progress, setProgress] = useState<number>(0); // 0..100\n  const [phase, setPhase] = useState<\n    \"idle\" | \"uploading\" | \"processing\" | \"done\" | \"error\"\n  >(\"idle\");\n\n  const validate = (f: File | null): string => {\n    if (!f) return \"Please select an MP3 file.\";\n    const isMp3 =\n      f.type === \"audio/mpeg\" ||\n      f.type === \"audio/mp3\" ||\n      /\\.mp3$/i.test(f.name);\n    if (!isMp3) return \"Only .mp3 files are supported.\";\n    if (f.size > MAX_SIZE_BYTES) return \"Max file size is 50 MB.\";\n    return \"\";\n  };\n\n  const assignFile = (f: File | null) => {\n    const e = validate(f);\n    setError(e);\n    setHint(e ? \"\" : \"Ready to analyze.\");\n    setFile(e ? null : f);\n    setResult(null);\n  };\n\n  const onInputChange = (e: React.ChangeEvent<HTMLInputElement>) =>\n    assignFile(e.target.files?.[0] ?? null);\n\n  const onDrop = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    assignFile(e.dataTransfer.files?.[0] ?? null);\n  }, []);\n\n  const onDragOver = (e: React.DragEvent) => {\n    e.preventDefault();\n    setHint(\"Drop to upload\");\n  };\n  const onDragLeave = () => setHint(file ? \"Ready to analyze.\" : \"\");\n  const pickFile = () => inputRef.current?.click();\n\n  const analyze = async () => {\n    if (!file) {\n      setError(\"Please select an MP3 file first.\");\n      return;\n    }\n    setLoading(true);\n    setError(\"\");\n    setHint(\"\");\n    setResult(null);\n    setPhase(\"uploading\");\n    setProgress(0);\n\n    try {\n      const fd = new FormData();\n      fd.append(\"file\", file);\n      fd.append(\"rules\", JSON.stringify(DEFAULT_RULES));\n\n      // Use XHR to get upload progress\n      const xhr = new XMLHttpRequest();\n      const url = \"/api/analyze-audio\";\n\n      // When uploading…\n      xhr.upload.onprogress = (e) => {\n        if (e.lengthComputable) {\n          const pct = Math.round((e.loaded / e.total) * 100);\n          setProgress(pct);\n        }\n      };\n\n      // After upload finished but before server responds, show “processing”\n      xhr.upload.onload = () => {\n        setPhase(\"processing\");\n        // Smooth “indeterminate-like” progress while we wait\n        let p = 60; // start around 60% to feel responsive\n        setProgress(p);\n        const tick = setInterval(() => {\n          p = Math.min(95, p + 1 + Math.random() * 2); // creep to 95%\n          setProgress(Math.round(p));\n        }, 300);\n        xhr.onreadystatechange = () => {\n          if (xhr.readyState === XMLHttpRequest.DONE) {\n            clearInterval(tick);\n          }\n        };\n      };\n\n      xhr.onerror = () => {\n        setPhase(\"error\");\n        setHint(\"\");\n        setError(\"Network error while uploading/processing the file.\");\n        setLoading(false);\n      };\n\n      xhr.onload = () => {\n        try {\n          if (xhr.status < 200 || xhr.status >= 300) {\n            setPhase(\"error\");\n            setHint(\"\");\n            setError(`Server error ${xhr.status}: ${xhr.responseText}`);\n            setLoading(false);\n            return;\n          }\n          const json = JSON.parse(xhr.responseText) as AnalyzeResponse;\n          if (!json.ok) {\n            setPhase(\"error\");\n            setHint(\"\");\n            setError(json.error || \"Analysis failed\");\n            setLoading(false);\n            return;\n          }\n          setResult(json);\n          setPhase(\"done\");\n          setProgress(100);\n          setHint(\n            json.passes ? \"Analysis passed.\" : \"Analysis completed (failed).\"\n          );\n        } catch (e) {\n          setPhase(\"error\");\n          setHint(\"\");\n          setError(\n            e instanceof Error ? e.message : \"Failed to parse server response.\"\n          );\n        } finally {\n          setLoading(false);\n        }\n      };\n\n      xhr.open(\"POST\", url, true);\n      xhr.send(fd);\n    } catch (err) {\n      setPhase(\"error\");\n      setHint(\"\");\n      setError(err instanceof Error ? err.message : \"Unknown error\");\n      setLoading(false);\n    }\n  };\n\n  const resetAll = () => {\n    setFile(null);\n    setError(\"\");\n    setHint(\"\");\n    setResult(null);\n    if (inputRef.current) inputRef.current.value = \"\";\n  };\n\n  const downloadTranscript = () => {\n    if (!result || !result.ok) return;\n    const base = (result.fileName || file?.name || \"transcript\").replace(\n      /\\.[^/.]+$/,\n      \"\"\n    );\n    const blob = new Blob([result.transcript], {\n      type: \"text/plain;charset=utf-8\"\n    });\n    const url = window.URL.createObjectURL(blob);\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = `${base}.txt`;\n    a.click();\n    window.URL.revokeObjectURL(url);\n  };\n\n  const downloadAnalysis = () => {\n    if (!result || !result.ok) return;\n    const payload = {\n      transcript: result.transcript,\n      stats: result.stats,\n      sections: result.sections ?? [],\n      kpis: result.kpis ?? null,\n      score: result.score ?? null,\n      fileName: result.fileName ?? file?.name ?? undefined,\n      generatedAt: new Date().toISOString()\n    };\n    const base = (result.fileName || file?.name || \"call_analysis\").replace(\n      /\\.[^/.]+$/,\n      \"\"\n    );\n    const blob = new Blob([JSON.stringify(payload, null, 2)], {\n      type: \"application/json;charset=utf-8\"\n    });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = `${base}.json`;\n    a.click();\n    URL.revokeObjectURL(url);\n  };\n\n  return (\n    <div className=\"my-8 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm sm:p-6\">\n      {/* Header */}\n      <div className=\"mb-4 flex items-start justify-between gap-3\">\n        <div>\n          <h2 className=\"text-lg font-semibold text-slate-900\">\n            Analyze an MP3\n          </h2>\n          <p className=\"mt-1 text-xs text-slate-500\">\n            Supported: <span className=\"font-medium\">.mp3</span> • Max{\" \"}\n            <span className=\"font-medium\">50MB</span>. Drag &amp; drop or\n            browse.\n          </p>\n        </div>\n        <div className=\"hidden items-center gap-2 sm:flex text-[11px] text-slate-500\">\n          <kbd className=\"rounded-md border bg-slate-50 px-1.5 py-0.5\">⌘</kbd>\n          <span>Drop to upload</span>\n        </div>\n      </div>\n\n      {/* Dropzone */}\n      <div\n        role=\"button\"\n        tabIndex={0}\n        onClick={pickFile}\n        onKeyDown={(e) =>\n          e.key === \"Enter\" || e.key === \" \" ? pickFile() : undefined\n        }\n        onDrop={onDrop}\n        onDragOver={onDragOver}\n        onDragLeave={onDragLeave}\n        className={`group relative grid cursor-pointer place-items-center rounded-xl border border-dashed p-6 transition ${\n          file\n            ? \"border-slate-300 bg-slate-50/60\"\n            : \"border-slate-300 bg-slate-50/40 hover:bg-slate-50\"\n        }`}\n        aria-label=\"Upload MP3 by clicking or dragging a file here\"\n      >\n        <input\n          ref={inputRef}\n          type=\"file\"\n          accept=\".mp3,audio/mpeg,audio/mp3\"\n          onChange={onInputChange}\n          className=\"hidden\"\n        />\n\n        {/* Icon + instructions */}\n        <div className=\"flex flex-col items-center text-center\">\n          <div className=\"mb-2 rounded-xl bg-slate-100 p-3 ring-1 ring-inset ring-white/40\">\n            {/* simple waveform glyph */}\n            <svg\n              width=\"28\"\n              height=\"28\"\n              viewBox=\"0 0 24 24\"\n              fill=\"none\"\n              aria-hidden\n            >\n              <rect\n                x=\"2\"\n                y=\"10\"\n                width=\"2\"\n                height=\"4\"\n                rx=\"1\"\n                className=\"fill-slate-400\"\n              />\n              <rect\n                x=\"6\"\n                y=\"7\"\n                width=\"2\"\n                height=\"10\"\n                rx=\"1\"\n                className=\"fill-slate-400\"\n              />\n              <rect\n                x=\"10\"\n                y=\"5\"\n                width=\"2\"\n                height=\"14\"\n                rx=\"1\"\n                className=\"fill-slate-400\"\n              />\n              <rect\n                x=\"14\"\n                y=\"7\"\n                width=\"2\"\n                height=\"10\"\n                rx=\"1\"\n                className=\"fill-slate-400\"\n              />\n              <rect\n                x=\"18\"\n                y=\"10\"\n                width=\"2\"\n                height=\"4\"\n                rx=\"1\"\n                className=\"fill-slate-400\"\n              />\n            </svg>\n          </div>\n          <p className=\"text-sm font-medium text-slate-800\">\n            {file ? \"File selected\" : \"Click to upload or drag & drop\"}\n          </p>\n          <p className=\"mt-1 text-xs text-slate-500\">MP3 only • up to 50MB</p>\n\n          {file && (\n            <div className=\"mt-3 w-full max-w-sm rounded-lg border border-slate-200 bg-white p-3 text-left\">\n              <p className=\"truncate text-sm text-slate-800\" title={file.name}>\n                <span className=\"font-medium\">Name:</span> {file.name}\n              </p>\n              <p className=\"text-xs text-slate-500\">\n                <span className=\"font-medium\">Size:</span>{\" \"}\n                {formatBytes(file.size)}\n              </p>\n            </div>\n          )}\n        </div>\n\n        {/* Active border accent */}\n        <div className=\"pointer-events-none absolute inset-0 rounded-xl ring-0 ring-indigo-200/0 transition group-hover:ring-4\" />\n      </div>\n\n      {/* Hints & Errors */}\n      <div className=\"mt-3 min-h-[20px] text-sm\">\n        {error ? (\n          <div className=\"rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-rose-700\">\n            {error}\n          </div>\n        ) : hint ? (\n          <div className=\"rounded-md border border-emerald-200 bg-emerald-50 px-3 py-2 text-emerald-700\">\n            {hint}\n          </div>\n        ) : null}\n      </div>\n\n      {/* Actions */}\n      <div className=\"mt-4 flex flex-wrap items-center gap-2\">\n        <button\n          onClick={analyze}\n          disabled={!file || !!error || loading}\n          className=\"inline-flex items-center justify-center gap-2 rounded-md bg-black px-4 py-2 text-sm font-medium text-white disabled:bg-gray-400\"\n        >\n          {loading && (\n            <svg\n              className=\"h-4 w-4 animate-spin\"\n              viewBox=\"0 0 24 24\"\n              fill=\"none\"\n              aria-hidden\n            >\n              <circle\n                className=\"opacity-25\"\n                cx=\"12\"\n                cy=\"12\"\n                r=\"10\"\n                stroke=\"currentColor\"\n                strokeWidth=\"4\"\n              />\n              <path\n                className=\"opacity-75\"\n                d=\"M4 12a8 8 0 018-8\"\n                stroke=\"currentColor\"\n                strokeWidth=\"4\"\n                strokeLinecap=\"round\"\n              />\n            </svg>\n          )}\n          {loading ? \"Analyzing…\" : \"Analyze MP3\"}\n        </button>\n\n        <button\n          onClick={resetAll}\n          disabled={loading || (!file && !result && !error && !hint)}\n          className=\"rounded-md border border-slate-300 bg-white px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 disabled:opacity-60\"\n        >\n          Reset\n        </button>\n        {(phase === \"uploading\" || phase === \"processing\") && (\n          <div className=\"mt-2 w-full\">\n            <div className=\"flex items-center justify-between text-xs text-slate-600\">\n              <span>\n                {phase === \"uploading\"\n                  ? \"Uploading…\"\n                  : \"Processing (transcribe + analyze)…\"}\n              </span>\n              <span>{progress}%</span>\n            </div>\n            <ProgressBar\n              value={progress}\n              indeterminate={phase === \"processing\" && progress < 60}\n            />\n          </div>\n        )}\n      </div>\n\n      {/* Result */}\n      {result && (\n        <div className=\"mt-5 rounded-lg border border-slate-200 bg-white p-4\">\n          {result.ok ? (\n            <>\n              <div className=\"flex flex-wrap items-center gap-2\">\n                <span className=\"text-sm font-semibold text-slate-900\">\n                  Status:\n                </span>\n                <StatusBadge\n                  text={result.passes ? \"PASS\" : \"FAIL\"}\n                  good={result.passes}\n                />\n                {result.fileName && (\n                  <span className=\"rounded bg-slate-100 px-2 py-0.5 text-[11px] text-slate-600\">\n                    {result.fileName}\n                  </span>\n                )}\n              </div>\n\n              {/* Top KPIs */}\n              <div className=\"mt-4 grid gap-3 sm:grid-cols-3\">\n                <KPIBlock\n                  label=\"Duration\"\n                  value={`${formatSecs(result.stats.durationSec)}s`}\n                />\n                <KPIBlock\n                  label=\"Word Count\"\n                  value={result.stats.wordCount ?? \"—\"}\n                />\n                <KPIBlock\n                  label=\"Rules\"\n                  value={`≥ ${DEFAULT_RULES.minDurationSec ?? \"—\"}s • ≥ ${\n                    DEFAULT_RULES.minWords ?? \"—\"\n                  } words`}\n                  sub={\n                    result.failures.length\n                      ? `${result.failures.length} issue(s)`\n                      : \"All checks passed\"\n                  }\n                />\n              </div>\n\n              {/* Deeper KPIs + Score */}\n              {(result.kpis || result.score) && (\n                <div className=\"mt-4 grid gap-3 sm:grid-cols-3\">\n                  {result.score && (\n                    <KPIBlock\n                      label=\"Call Score\"\n                      value={`${result.score.total}/100`}\n                    />\n                  )}\n                  {result.kpis && (\n                    <>\n                      <KPIBlock\n                        label=\"% in Discovery\"\n                        value={`${(\n                          result.kpis.percentTime.discovery ?? 0\n                        ).toFixed(1)}%`}\n                        sub=\"Target ~35–55%\"\n                      />\n                      <KPIBlock\n                        label=\"Time to Pricing\"\n                        value={formatMMSS(result.kpis.timeToPricingSec)}\n                        sub=\"Sooner is not always better\"\n                      />\n                    </>\n                  )}\n                </div>\n              )}\n\n              {/* Failures */}\n              {result.failures.length > 0 && (\n                <div className=\"mt-4\">\n                  <div className=\"mb-1 text-sm font-medium text-rose-700\">\n                    Failures\n                  </div>\n                  <ul className=\"list-disc space-y-1 pl-5 text-sm text-rose-700\">\n                    {result.failures.map((f, i) => (\n                      <li key={i}>{f}</li>\n                    ))}\n                  </ul>\n                </div>\n              )}\n\n              {result.sections && result.sections.length > 0 && (\n                <SectionTimeline secs={result.sections} />\n              )}\n\n              {/* Transcript */}\n              <details className=\"mt-5 group\">\n                <summary className=\"cursor-pointer select-none text-sm font-medium text-slate-900 group-open:opacity-70\">\n                  Transcript\n                </summary>\n                <pre className=\"mt-2 max-h-72 overflow-auto whitespace-pre-wrap rounded-md bg-gray-50 p-3 text-[13px] text-slate-800\">\n                  {result.transcript}\n                </pre>\n              </details>\n\n              {/* Export buttons */}\n              <div className=\"mt-4 flex flex-wrap gap-2\">\n                <button\n                  onClick={downloadTranscript}\n                  className=\"rounded-md border border-slate-300 bg-white px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50\"\n                >\n                  Download Transcript (.txt)\n                </button>\n                <button\n                  onClick={downloadAnalysis}\n                  className=\"rounded-md border border-slate-300 bg-white px-3 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50\"\n                >\n                  Download Analysis (.json)\n                </button>\n              </div>\n            </>\n          ) : (\n            <div className=\"rounded-md border border-rose-200 bg-rose-50 px-3 py-2 text-rose-700\">\n              Error: {result.error || \"Unknown error\"}\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}